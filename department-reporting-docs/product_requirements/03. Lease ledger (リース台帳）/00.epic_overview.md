JIRA link: https://moneyforward.atlassian.net/browse/LA-85

## Overview

* Background
  * <span style="color: rgb(55, 65, 81)">With the application of the new lease accounting standards, the scope of items that need to be included on the balance sheet is **expanding**. As a result, users will conduct a review of leases from the past using a **survey form**.</span>
* Feature
  * <span style="color: rgb(55, 65, 81)">The system collects transaction information related to leases and automatically determines whether they qualify as leases.</span>
* Advantage
  * <span style="color: rgb(55, 65, 81)">**Accounting staff applying the new lease standards** can use the survey form to quickly gather and manage transaction information by having each department and stakeholder fill in the necessary details in Excel.</span>
  * <span style="color: rgb(55, 65, 81)">**Both accounting staff and department representatives** can automatically perform complex evaluations by entering only the essential items in the survey form.</span>
  * <span style="color: rgb(55, 65, 81)">**Project members working on the new lease standards** can easily check the work records of each person involved through the system.</span>
* Benefit
  * <span style="color: rgb(55, 65, 81)">The system automatically decides if a transaction is a lease based on the completed survey forms, **reducing the time needed to check each transaction individually**. Users can then review the filtered transaction information based on the automatic identification results.</span>
  * <span style="color: rgb(55, 65, 81)">The history management allows for the collection of work records from multiple people and the Excel files they are working on, making it easy to see who did what and to what extent. **This ensures the accuracy of the results from the lease review process**.</span>

## Purpose

* Users want to **accurately and quickly carry out the process of identifying leases**.
  * Missing or double-counting leases poses a risk to a **company's reliability, affecting financial reporting, internal controls, and management decisions**. Therefore, it's important to correctly determine whether transactions are leases from a large amount of transaction data to prevent any omissions or double-counting.

## User's pain

* **Accountants Implementing the New Lease Accounting Standards**
  * **Transaction information related to leases is scattered across different departments and hasn't been managed properly until now.**
    * There is a huge amount of transaction data, making the identification process time-consuming.
    * Payment information for leases is not linked to contract information.
    * Contract formats are inconsistent.
  * **The process of identifying leases using survey forms is dependent on specific individuals.**
    * It's difficult to track who has reviewed what and to what extent.
    * There are many criteria to check, requiring significant effort to verify and input each transaction individually.
    * Without accurate lease transaction information, it's impossible to assess the financial impact.
  * **There is a need to avoid issues that auditors are likely to point out.**
    * There is a risk of missing hidden leases (transactions that should be classified as leases but were overlooked).
    * There is a risk of double-counting due to multiple people working on the same tasks.
* **Department Representatives:**
  * **They are asked for contract details, but collecting this information takes time.**
    * Contracts have not been centrally managed.
    * It takes effort to understand the necessary items for lease determination, organize the information, and share it with the accounting department.

## Demands

* **Users want to comprehensively understand lease-related transaction information that spans across different departments.**
  * Because accountants want to conduct a company-wide review of leases to ensure proper management of transaction information and the accuracy of financial reporting
* **Users want to make complex lease identification tasks easier.**
  * Accountants need to identify lease-related transactions from a vast amount of transaction data and determine if they qualify as leases by reviewing each contract individually. This task is very demanding.
* **In the process of identifying leases, which involves multiple people, users want to keep track of the lates work status.**

## Business flow

### As-is

<img src='/attachments/7a97e16d-1488-4e65-9408-794f5fb127cd' title='image.png' alt='image' width='2580' data-meta='{"width":2580,"height":1022}'>

### To-be

<img src='/attachments/0283309e-867e-4457-95b9-67c9a89e3d40' title='image.png' alt='image' width='2790' data-meta='{"width":2790,"height":970}'>

## Requirement

* **Survey form - Import**
  * **Download Excel format**
    * A format that each department can easily fill out
    * Easy to input, with sample data provided.
  * **Import**
    * Import data using an Excel file.
    * Only "add" new data; existing data is not overwritten or deleted.
    * Flexible import that doesn't stop user work due to minor errors.
    * Automatically determine the type of lease with the minimum required information (contract start date, duration, lease payment, identification questions).
* **Survey form - Collection**
  * Information is easy to view in a list format.
  * Export the list of survey forms as a CSV file.
  * Search and extract information at the level of detail the user needs.
* **Survey form - Single**
  * The following actions are possible:
    * Edit
    * Delete
* Operation history
  * Know the following operation history
    * Delete
    * Edit
    * Import
    * Disable import
  * The following actions are possible:
    * Download the imported Excel (original data).
    * Disable import.
      * Use soft delete.

## Figma URL

⁠[https://www.figma.com/design/YDRMCfiwdGlT2Q6k5SlGTz/\[LA\]-Lease-Accounting---リース会計?node-id=200-1063&p=f&t=NpM9x6A3o2HCgKxd-0](https://www.figma.com/design/YDRMCfiwdGlT2Q6k5SlGTz/%5BLA%5D-Lease-Accounting---%E3%83%AA%E3%83%BC%E3%82%B9%E4%BC%9A%E8%A8%88?node-id=200-1063&p=f&t=NpM9x6A3o2HCgKxd-0)

## User Stories

| Priority | Ticket | English Title | Japanese Title | Version | 
| --- | --- | --- | --- | --- |
| Must have | [LA-93](https://moneyforward.atlassian.net/browse/LA-93) | https://moneyforward.kibe.la/notes/319089  | 調査票Excelを取り込んで一覧画面に結果が反映される | 0.5 | 
| Must have | [LA-109](https://moneyforward.atlassian.net/browse/LA-109) | [03.LA-109 Can see toast message after the survey form Excel import is complete.](https://moneyforward.kibe.la/notes/320703) | 調査票Excelのインポート完了後にToastを掲出する | 0.5 | 
| Must have | [LA-110](https://moneyforward.atlassian.net/browse/LA-110) | [04. LA-110 Can see toast notification indicating that the import of the survey form is in progress](https://moneyforward.kibe.la/notes/320676) | 調査票Excelのインポート中、キャンセルできる | 0.5 | 
| Must have | [LA-94](https://moneyforward.atlassian.net/browse/LA-94) | https://moneyforward.kibe.la/notes/319090  | 調査票Excelの取り込みに失敗した時エラーが確認できる | 0.5 | 
| Must have | [LA-95](https://moneyforward.atlassian.net/browse/LA-95) | https://moneyforward.kibe.la/notes/319091  | 調査票の内容からリースかどうかが自動判定できる |  | 
| Must have | [LA-96](https://moneyforward.atlassian.net/browse/LA-96) | https://moneyforward.kibe.la/notes/319092  | 取引情報ごとに、詳細を閲覧できる |  | 
| Must have | [LA-97](https://moneyforward.atlassian.net/browse/LA-97) | https://moneyforward.kibe.la/notes/319093  | 取引情報を編集できる |  | 
| Must have | [LA-98](https://moneyforward.atlassian.net/browse/LA-98) | https://moneyforward.kibe.la/notes/319094  | 取引情報を削除できる |  | 
| Must have | [LA-99](https://moneyforward.atlassian.net/browse/LA-99) | https://moneyforward.kibe.la/notes/319095  | 調査票の更新履歴を確認できる |  | 
| Should have | [LA-100](https://moneyforward.atlassian.net/browse/LA-100) | https://moneyforward.kibe.la/notes/319096  | インポート操作を無効化にすることができる |  | 
| Should have | [LA-101](https://moneyforward.atlassian.net/browse/LA-101) | https://moneyforward.kibe.la/notes/319097  | ロールに応じた操作制御 |  | 
| Should have | [LA-108](https://moneyforward.atlassian.net/browse/LA-108) | Can search/filter on survey form list screen | 調査票の一覧で検索できる・フィルタをかけられる |  | 
| Should have | [LA-107](https://moneyforward.atlassian.net/browse/LA-107) | Can export the content of Survey form | 調査票の内容をエクスポートできる |  | 

# リース台帳のエピックのまとめ

## 全体概要

### Background (背景)

* 新リース会計基準適用に伴い、オンバランスとなる対象範囲が広がるため、ユーザーは調査票を使って、過去1年分のリースの洗い出しを実施する。

### Feature (製品の特徴・機能)

* リース対象となる取引情報を収集し、リースの自動判定を行う

### Advantage (ユーザーがXX出来るようになる)

* **新リース会計基準適用を実施する経理担当者**は、調査票を活用し、各部門・関係者から必要な情報をExcelに記入することで、取引情報をスピーディーに収集し、一元管理することができる。
* **新リース会計基準適用を実施する経理担当者及び部門担当者**は、調査票の必要最低限の項目を入力することで、複雑な判定作業を自動で行うことができる。
* **新リース会計基準適用を実施するプロジェクトメンバー**は、各担当者の作業の証跡をシステムで一元的に確認できるようになる。

### Benefit (Advantageで出来るようになった結果得られる定量的な便益)

* 入力された調査票をもとに、システムがリース対象かどうかを自動判定するので、**1件ずつリースかどうかを細かく精査する工数を削減することができる**。自動判定した結果をもとに絞り込まれた取引情報を精査することができる。
* 更新履歴では、複数人の作業履歴、作業しているExcelファイルを蓄積することができるので、誰がどこまでどんな内容を作業したかを一元的に確認でき、**リースと判定されうる取引の洗い出し結果の確からしさを担保することができる。**

## 目的

* **リースの洗い出し作業を正確にスピーディーに実施したい。**
  * **リースの計上もれ、二重計上は、財務・内部統制・経営判断という“企業の信頼性そのもの”を脅かすリスクがあるため**、膨大な数の取引情報からリースかどうかを正しく判定し、計上漏れ、二重計上が発生しないようにしたい。

## ユーザ課題

* **新リース会計基準の適用を実施する経理担当者:**
  * **リース対象となる取引情報が各部門ごとに分散している・今まで管理されていない状態**
    * 取引情報の数が膨大で、洗い出しを行うのに時間がかかる
    * リース料支払情報と契約情報が紐づいていない
    * 契約書のフォーマットがバラバラ
  * **調査票の洗い出し作業が、属人化している状態**
    * 誰がどこまで精査したのか把握するのが大変
    * 判定項目が多く、判定のために１件ずつ確認し入力する労力が高い
    * 正確なリース取引情報が揃わないと、影響額を調査することができない
  * **監査から指摘を受けるリスクの高い内容を回避したい**
    * 隠れリース（本来リース対象だが、判別漏れしてしまったもの）の計上漏れ
    * 複数作業者による二重計上のリスク
* **各部門担当者:**
  * **契約の詳細を求められるが、収集に時間がかかる**
    * 契約書を一元管理できてなかったため
    * リース判定に必要な項目の把握と、情報を整理して経理に共有するのに手間がかかる

## 要求（ユーザーが求めていること・実現したいこと）

* **各部門間にまたぐリース対象の取引情報を網羅的に把握したい**
  * 経理担当者は、取引情報の適切な管理と、財務報告の正確性を確保するために、全社的にリースの洗い出しを行いたいから
* **複雑な判定作業をラクにしたい**
  * 経理担当者は、膨大な量の取引情報の中からリース対象の取引情報を特定し、1件ずつ契約書の記載を見ながら、リースの判定を行わなければならない。その作業は負荷が高い。
* **複数人で実施するリースの洗い出し作業において、最新の作業状況を把握したい**

## 業務フロー

### 現状

<img src='/attachments/50a71b0f-3e7b-47e0-9914-cbec79e1ef60' title='image.png' alt='image' width='2846' data-meta='{"width":2846,"height":1120}'>

### 理想

<img src='/attachments/34b4b90f-986f-49c3-b96a-b8ba0861befa' title='image.png' alt='image' width='2834' data-meta='{"width":2834,"height":990}'>

## 要件

* **リース台帳 - インポート**
  * **インポート**
    * 調査票（Excel）の取り込み
      * 「追加」のみ。全上書きや削除はされない。
      * 細かいエラーでユーザーの作業を止めることなく、柔軟に取り込める
      * 最低限の必須情報（契約開始日、期間、リース料、判定設問）の入力で、リースの種別を自動判定する
* **リース台帳 - Collection**
  * 必要な情報が一覧性を持ってみやすい
  * 調査票の一覧をCSVファイルでエクスポートできる
  * ユーザーが知りたい粒度で情報を検索＆抽出できる
* **リース台帳 - Single**
  * 以下の操作が可能
    * Read
    * Update
    * Delegte
  * リース対象の取引情報の支払予定、償却予定について以下の操作が可能。
    * Read
    * Update

### 未検討事項

*  **更新履歴**
  * 操作履歴がわかる
    * 削除
    * 編集
    * インポート
    * インポートの無効
  * 以下の操作が可能
    * インポートしたExcel（オリジナルデータ）のダウンロード
    * インポートの無効
      * ソフトデリートとする

======

Memo: [Q&A sheet](https://docs.google.com/spreadsheets/d/18f4vRFABbzCeKbHcnDpkII51mgUYz0MjoWK9OHmU_Jk/edit?gid=527323356#gid=527323356)
